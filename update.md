---
sidebar: false
outline: 2
---

::: tip OhMyMN

未签名版本请在 QQ 频道中下载。未签名版本通常是测试版本，请谨慎使用。
https://bbs.marginnote.cn/t/topic/20501#heading-6

:::

## v4.1.1 (2022-11-09)
::: tip
该版本有签名：https://bbs.marginnote.cn/t/topic/20501
:::

### 修复
- **Gesture**: 自定义捷径无法触发的问题。
### 改进
- **[初始化](/guide/profile.md#初始化)**: 初始化后的文档配置和笔记本配置会作为新文档和新笔记本的默认配置。现在初始化是真正的初始化。
- **切换标题摘录**: `交换标题和摘录` 在多选模式下只会弹一次弹窗，并作用于所有标题和摘录同时存在的卡片。

## v4.1.0 (2022-11-07)
::: tip
该版本有签名：https://bbs.marginnote.cn/t/topic/20501
:::

### 修复
- `锁定摘录文字` 在生成标题的情况下失效的问题，以及在开启在线矫正时失效的问题。
### 改进
- 改进控制面板选项的英文显示和翻译。链接改为英文文档的链接。
- 移除 `面板显示控制——双击面板关闭面板`，容易导致误触。
- **MagicAction For Text**: `复制选中文字` 不再需要启用 `CopySearch`。
- **AutoTag**：通过空格来添加多个标签。不再将空格替换为 "_"。

## v4.0.16 (2022-11-04)
### 修复
- **在线矫正**: 优化了在线矫正的判断机制，加长了在线矫正启动的等待时间，以解决部分人修改后的摘录被矫正后的结果重新覆盖的问题。但如果没有开启在线矫正，会在一次摘录后自动取消等待。如果开启了在线矫正，会在一次摘录后自动开启等待。
- **Gesture**: 支持手动调整文字选择工具栏的识别区域，以解决部分人无法触发的问题。
- **AutoTranslate**：修复有时出现签名错误的问题。
- **AutoComplete**：修复手动执行动作时无法自动获取上下文的问题。
- **AutoFormat**: `英文标题规范化` 不起作用的问题。
- **ShortCut**: 部分情况下自定义捷径无法使用的问题，当动作对应的模块没有开启时，添加提示。
### 改进
- **AutoComplete**: 优化了上下文识别~~算法~~。
- **AutoDef**: `自定义提取标题` 支持 `别名转为多个标题`。
- **AutoDef**: `自定义提取标题` 不再支持 fnKey。
- **AutoTag**: 当需要添加的标签内容有标点符号时，自动替换为下划线。
- **AutoComplete**：`英文单词制卡`，多选模式下，自动关闭词义选择和原型选择。
### 新功能
- **AutoTranslate**：新增动作，`翻译摘录内容`，可以手动翻译卡片中的所有摘录。
## v4.0.15 (2022-10-28)
### 改进
- 支持在没有文档的笔记本下使用，但要注意，如果你正在新建笔记本，新建完成后需要重新进入，否则配置将不会保存在刚导入的文档里。metadata 插件同理。
- 适配 metadata v0.9.5。

## v4.0.14 (2022-10-24)

### 修复
- 修复了一些不痛不痒的小 bug。

### 改进
- **Shortcut**：捷径 Pro 改名为 自定义捷径。并修改了其语法，支持一个捷径执行多个动作。

### 新功能
- **Gesture**：支持触发自定义捷径，也就是说一个手势也可以执行多个动作。


## v4.0.13 (2022-10-22)

### 改进
- 隐藏所有模块的选项，包括 MagicAction。可手动展开/折叠。但是在下次打开 MarginNote 时，依旧默认全部隐藏。
- 帮助信息中添加外部链接的符号，如果有 ⎋ ，则表示可以点击跳转。


## v4.0.12 (2022-10-22)

### 改进
- 所有模块的设置选项默认隐藏。包括 MargicAction。点击提示信息展开。再次点击会跳转到对应的使用文档页面。每次重新打开面板会再次隐藏全部选项。

## v4.0.11 (2022-10-20)

::: warning 注意
底层变化较大，有可能会出现 bug。注意备份。使用上没有区别。
:::

### 修复

- 修复了拖拽合并生成标题后，如果选择了 `等会删除`，当你主动删除了卡片或者笔记后，可能会导致闪退的问题。
- 修复了部分带有 `-` 的 URL 无法打开的问题。

### 新功能

- **AutoTag**：支持记录自动生成的标签，意味着当你修改摘录的时候，会先移除之前生成的标签，再重新生成标签。目前自动生成的标签，评论，标题均支持这个特性。如果修改摘录后不会再生成标签和评论，那么就会移除之前生成的标签和摘录。**但是即使不会再生成标题，之前生成的标题还是会保留**。

- **MagicAction**："交换摘录和标题" 添加更多交换方式。建议单选时使用。

### 改进

- 如果摘录被 AutoTitle 或者 AutoComplete 清空，则传入之前的内容到 AutoTag，AutoComment 以及 AutoTransalte 里。不用关心是什么意思，反正就是和以前一样用就行。
- AutoTag 和 AutoComment 支持图片摘录。图片摘录会传入 `@picture` 。你可以用 `(/@picture/， "这是图片")` 来专门给图片摘录添加评论或标签。反正就是说现在图片摘录也有文字，不会直接跳过。只有这两个模块支持 `@picture`。想要任何时候（非空）都添加标签和摘录，请使用 `(/^.+$/gs, "标签/评论")`。
- **模版变量**：
  - 移除 `excerpts.img`，`excerpts.base64`，`comments.img`，`comments.base64`，`comments.nopic`。
  - 添加 `excerpts.text`, `comments.text`。
  - 移除 `allText`，增加 `allTextPic.text`, `allTextPic.ocr`, `allTextPic.md`, `allTextPic.html`。
  - 添加 `doc.url.pure`，`doc.url.md`，`doc.url.html`。文档没有直达的 URL，但是可以利用当前文档的最新一个笔记的链接来间接跳转。

### 其他

::: v-pre

- 移除了 AutoComment 中的预设 `修改时间`，如果想继续使用，可以自定义 `(/^.+$/gs, "{{time.now}}")`。不过这个并不是很好用，因为时间在变化，修改的时候会不断的添加新的时间。

:::

## v4.0.10 (2022-10-18)

### 新功能

- **MagicAction For Text**：新增 `显示复制内容` 的功能。

### 改进

- 优化拖拽合并生成标题的逻辑。不再支持 ”不删除原摘录“。
- **MagicAction For Text**： 其中的几个预先处理的选项均需要启用对应模块。
- **AutoComplete**：将自动摘录的上下文放到摘录的位置，移除 “翻译上下文”，请直接使用 AutoTranslate。
- 如果笔记中没有文档，不会进行初始化，并进行提示。

### 其他

- **AutoTitle**：移除 “标题摘录始终为标题”。

## v4.0.9 (2022-10-09)

### 修复

- **MagicAction For Card**：修复合并卡片内文字的问题。

## v4.0.8 (2022-10-07)

### 新功能

::: v-pre

- **模版变量**：支持读取调用 Metadata 插件中的偏移量（真实页码），引用，Citation Key，以及从 Zotero 中导入所有的元数据。其中，真实页码使用 `{{page.real.start}}`，引用使用 `{{doc.reference}}`，Citation key 使用 `{{doc.citeKey}}`，元数据统一使用 `{{doc.metadata.xxxx}}` 来读取。

:::

## v4.0.7 (2022-10-04)

### 修复

- 在 4.0.6 的基础上修复 MarginNote 3.7.19 中无法使用文本选择手势的问题。
- 修复 Autodef 无法正常工作的问题。

### 改进

- **AutoDef**：自定义定义联项中如果使用正则数组，比如 [reg1,reg2]，则第一个为主正则，其余正则将对已经被主正则匹配到的内容再次进行判断，全部符合主正则才会作为分隔点。在自定义别名分词也是同理。

## v4.0.6 (2022-10-04)

::: warning 注意
该版本变化较大，主要测试升级后多选和单选的设置是否发生混乱，请先备份所有配置在升级。
:::

### 新功能

- 新增 Shortcut 模块，在升级 MarginNote 3.7.19 后，支持快捷键，iPad 也支持，具体设置方法等待教程。
- 新增 AutoSimplify 模块，在摘录时自动将繁体中文转为简体中文。
- **MagicAction**：支持导出或导入单个模块的配置。支持手动重置配置和同步多窗口的配置。
- 增加更多控制面板的显示位置。
- **AutoDef**：新增 `拆分摘录` 的动作，所以现在有提取标题和拆分摘录两个动作。

### 改进
- **AutoDef**：移除 `摘录仅保留定义项`，该功能现在默认开启，无法关闭。
- 支持判断图片摘录是否被 OCR，如果没有就当作图片。具体影响到搜索，合并，以及模版引擎中的 `excerpts.ocr`。
- **AutoFormat**：将 `删除所有空格` 的预设单独拆分出来，作为文档配置，仅当前文档生效。
- **CopySearch**：自定义复制内容和自动搜索内容分开，可以单独设置。

## v4.0.5 (2022-10-01)

### 修复

- 修复 3.7.19 手势无法使用的问题，请升级到 3.7.19 的用户升级。

## v4.0.4 (2022-09-02)

### 修复

3. **AutoOCR**：修复重置百度 OCR key 后修改无效的问题。

### 改进

- **Gesture**：提高手势响应的成功率，文档模式下也可以使用文本选择的手势。如果这次手势成功率还是比较低的化，那只能是不同设备有区别了，目前我自己测试是 100% 成功率。
- **Gesture**：打开控制面板变为切换控制面板，也就是开启或关闭。
- 控制面板的位置设置为自动后，现在在文档调整宽度时自动跟随。

### 其他

- 移除保持屏幕常亮的功能，改为单独一个插件。

## v4.0.3 (2022-08-16)

### 修复

- 修复一旦使用了 自动转换矩形/多边形摘录为文字，自动转标题或者补全词形时会始终生成与标题相同摘录的问题。

### 新功能

- 强化配置导出导入功能，可以单独导出部分配置。

### 改进

- 自动备份配置变为手动输入备份卡片链接。

## v4.0.2 (2022-08-13)

### 修复

- **AutoTranslte**：修复字数计算错误以及语言判断错误的问题。

### 新功能

- **AutoList**：预设 `ABCD` 支持了 `(A)` `[A]`。

### 改进

- 稍微美化了一下控制面板。

## v4.0.1 (2022-08-06)

### 修复

- 修复 Gesture 中使用重命名标题不会弹出输入框的问题。
- 修复 MagicAction for Card 中切换摘录标题在使用图片摘录转文字的情况下失效的问题。
- 修复 锁定摘录文字 在创建摘录时也会锁定摘录，无法修改选区的问题。

### 改进

- 改善各种 API key 在没有输入时的提示文字，更加易懂。

## v4.0.0 (2022-08-01)

### 修复

### 新功能

### 改进

### 其他
